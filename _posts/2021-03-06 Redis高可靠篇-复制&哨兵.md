---
layout:     post
title:      Redis的高可靠篇
subtitle:   复制&哨兵
date:       2021-03-05
author:     Enoch
header-img: img/post-bg-cook.jpg
catalog: true
tags:
    - Redis
---

Redis高可靠篇
=

高可靠性有两层含义：一是数据尽量少丢失，二是服务尽量少中断。AOF 和 RDB 保证了前者，而对于后者，Redis 的做法就是增加副本冗余量，将一份数据同时保存在多个实例上。即使有一个实例出现了故障，需要过一段时间才能恢复，其他实例也可以对外提供服务，不会影响业务使用。

- 主从复制
- 哨兵（sentinel）

# 复制

## 什么是复制？

复制（replication）即副本，复制可以让其他服务器拥有一个不断地更新的数据副本，从而使得拥有数据副本的服务器可以用于处理客户端发送的读请求。关系型数据库通常会使用一个主服务器（master）向多个从服务器（slave）发送更新，并使用从服务器来处理所有读请求。Redis也采用了同样的方法来实现自己的复制特性。

## 为什么要复制？

## 如何进行复制？

Redis的复制功能分为同步（sync）和命令传播（command propagate）两个操作。

- 同步操作用于将从服务器的数据库状态更新至主服务器当前所处的数据库状态；
- 命令传播操作则用于在主服务器的数据库状态被修改，导致主从服务器的数据库状态出现不一致时，让主从服务器的数据库重新回到一致状态。

